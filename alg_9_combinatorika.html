<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ—Ç–æ–¥–∏—Å—Ç: –ö–æ–º–±—ñ–Ω–∞—Ç–æ—Ä–∏–∫–∞ (9 –∫–ª–∞—Å)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; overflow: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .task-card { border: 1px solid #e2e8f0; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .task-card:hover { border-color: #3b82f6; box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.1); }
        .whiteboard-container { background-image: radial-gradient(#e2e8f0 1px, transparent 1px); background-size: 20px 20px; }
        .tool-active { @apply bg-indigo-600 text-white shadow-md; }
        .solved-card { border-color: #22c55e !important; background-color: #f0fdf4 !important; }
        .theory-block { border-left: 4px solid #6366f1; background: #f5f3ff; }
        .final-test-section { background: #1e1b4b; color: white; border-radius: 2rem; padding: 2rem; }
    </style>
</head>
<body class="h-screen flex text-slate-900">

    <div class="w-full lg:w-1/2 flex flex-col bg-white border-r border-slate-200">
        <header class="p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white/90 backdrop-blur-md z-50">
            <div>
                <h1 class="text-xl font-extrabold text-slate-800">¬ß21. –ö–æ–º–±—ñ–Ω–∞—Ç–æ—Ä–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞</h1>
                <p class="text-xs font-bold text-indigo-500 uppercase tracking-widest mt-1">–ê–ª–≥–µ–±—Ä–∞ 9 –∫–ª–∞—Å ‚Ä¢ –ü—Ä–∞–≤–∏–ª–∞ —Å—É–º–∏ —Ç–∞ –¥–æ–±—É—Ç–∫—É</p>
            </div>
            <div class="text-right">
                <div class="text-xs font-black text-slate-400 mb-1" id="prog-label">–ü—Ä–æ–≥—Ä–µ—Å: 0/20</div>
                <div class="w-32 h-2 bg-slate-100 rounded-full overflow-hidden">
                    <div id="prog-bar" class="h-full bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar">
            
            <section class="theory-block p-6 rounded-r-2xl">
                <h2 class="text-lg font-bold text-indigo-900 mb-3">üìö –ö–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ –≥–æ–ª–æ–≤–Ω–µ</h2>
                <div class="space-y-4 text-sm leading-relaxed text-slate-700">
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <span class="font-bold text-indigo-600">‚ûï –ü—Ä–∞–≤–∏–ª–æ —Å—É–º–∏ (–ê –ê–ë–û –í):</span><br>
                        –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç A –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ \(k_1\) —Å–ø–æ—Å–æ–±–∞–º–∏, –∞ B ‚Äî \(k_2\) —Å–ø–æ—Å–æ–±–∞–º–∏, —Ç–æ –≤–∏–±—Ä–∞—Ç–∏ A <b>–∞–±–æ</b> B –º–æ–∂–Ω–∞ \(k_1 + k_2\) —Å–ø–æ—Å–æ–±–∞–º–∏.
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <span class="font-bold text-indigo-600">‚úñÔ∏è –ü—Ä–∞–≤–∏–ª–æ –¥–æ–±—É—Ç–∫—É (–ê –Ü –í):</span><br>
                        –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç A –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ \(k_1\) —Å–ø–æ—Å–æ–±–∞–º–∏, —ñ <b>–ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ</b> —Ç–∞–∫–æ–≥–æ –≤–∏–±–æ—Ä—É –µ–ª–µ–º–µ–Ω—Ç B –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ \(k_2\) —Å–ø–æ—Å–æ–±–∞–º–∏, —Ç–æ –ø–∞—Ä—É (A, B) –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ \(k_1 \cdot k_2\) —Å–ø–æ—Å–æ–±–∞–º–∏.
                    </div>
                </div>
            </section>

            <div id="tasks-list" class="space-y-6"></div>

            <div id="test-zone" class="hidden py-10">
                <div class="final-test-section shadow-2xl">
                    <h2 class="text-2xl font-black mb-6 text-indigo-300">üèÅ –§–Ü–ù–ê–õ–¨–ù–ò–ô –¢–ï–°–¢</h2>
                    <div id="test-questions" class="space-y-6"></div>
                    <button onclick="checkTest()" class="mt-8 w-full bg-indigo-500 text-white py-4 rounded-xl font-bold hover:bg-indigo-400 transition">–ü–ï–†–ï–í–Ü–†–ò–¢–ò –†–ï–ó–£–õ–¨–¢–ê–¢</button>
                </div>
            </div>

            <div class="py-10">
                <button onclick="finishLesson()" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-black text-lg hover:bg-indigo-600 transition shadow-xl active:scale-[0.98]">
                    –ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö
                </button>
            </div>
        </main>
    </div>

    <div class="hidden lg:flex w-1/2 flex-col bg-slate-100 p-6 relative">
        <div class="absolute top-10 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-white/95 backdrop-blur-md p-2 rounded-2xl shadow-xl border border-slate-200">
            <button onclick="setTool('pen')" id="btn-pen" class="p-3 rounded-xl tool-active" title="–û–ª—ñ–≤–µ—Ü—å">‚úèÔ∏è</button>
            <button onclick="setTool('eraser')" id="btn-eraser" class="p-3 rounded-xl hover:bg-slate-100" title="–ì—É–º–∫–∞">üßΩ</button>
            <div class="w-px h-6 bg-slate-200 mx-1"></div>
            <button onclick="toggleGrid()" id="btn-grid" class="p-3 rounded-xl hover:bg-slate-100" title="–°—ñ—Ç–∫–∞/–î–µ—Ä–µ–≤–æ">üìè</button>
            <button onclick="clearCanvas()" class="px-4 py-2 text-[10px] font-black text-red-500 hover:bg-red-50 rounded-xl uppercase">–û—á–∏—Å—Ç–∏—Ç–∏</button>
        </div>
        
        <div class="flex-1 whiteboard-container bg-white rounded-[2rem] shadow-inner border border-slate-200 overflow-hidden relative" id="canvas-parent">
            <canvas id="whiteboard" class="cursor-crosshair"></canvas>
        </div>
        
        <div class="mt-4 text-[10px] text-slate-400 text-center font-bold uppercase tracking-widest">
            –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ —á–µ—Ä–Ω–µ—Ç–∫–∞ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤
        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-6">
        <div class="bg-white rounded-[2.5rem] p-10 max-w-sm w-full text-center shadow-2xl">
            <div id="modal-icon" class="text-6xl mb-4">üåü</div>
            <h2 class="text-2xl font-black text-slate-800 mb-2">–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!</h2>
            <p id="res-score" class="text-indigo-600 font-black text-3xl mb-4"></p>
            <p id="res-msg" class="text-slate-500 mb-8 italic"></p>
            <button onclick="location.reload()" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold hover:bg-indigo-600 transition">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
        </div>
    </div>

<script>
    const tasksData = [
        { id: 8961, q: "–ù–∞ —Ç–∞—Ä—ñ–ª—Ü—ñ 5 —è–±–ª—É–∫ —ñ 8 —Å–ª–∏–≤. –°–∫—ñ–ª—å–∫–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏ –º–æ–∂–Ω–∞ –≤–∑—è—Ç–∏ <b>–æ–¥–∏–Ω</b> —Ñ—Ä—É–∫—Ç?", a: "13", h: "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –ø—Ä–∞–≤–∏–ª–æ —Å—É–º–∏: 5 + 8", s: "5 + 8 = 13" },
        { id: 8962, q: "–ù–∞ —Ç–∞—Ä—ñ–ª—Ü—ñ 5 —è–±–ª—É–∫ —ñ 8 —Å–ª–∏–≤. –°–∫—ñ–ª—å–∫–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏ –º–æ–∂–Ω–∞ –≤–∑—è—Ç–∏ <b>–æ–¥–Ω–µ —è–±–ª—É–∫–æ —ñ –æ–¥–Ω—É —Å–ª–∏–≤—É</b>?", a: "40", h: "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –ø—Ä–∞–≤–∏–ª–æ –¥–æ–±—É—Ç–∫—É: 5 * 8", s: "5 * 8 = 40" },
        { id: 8971, q: "–£ –∫–ª–∞—Å—ñ 10 —é–Ω–∞–∫—ñ–≤ —ñ 15 –¥—ñ–≤—á–∞—Ç. –°–∫—ñ–ª—å–∫–∏ —î —Å–ø–æ—Å–æ–±—ñ–≤ –≤–∏–±—Ä–∞—Ç–∏ <b>–æ–¥–Ω–æ–≥–æ</b> —É—á–Ω—è?", a: "25", h: "–ë—É–¥—å-—Ö—Ç–æ –∑ –∫–ª–∞—Å—É: 10 + 15", s: "10 + 15 = 25" },
        { id: 8972, q: "–°–∫—ñ–ª—å–∫–∏ –ø–∞—Ä '—é–Ω–∞–∫ —ñ –¥—ñ–≤—á–∏–Ω–∞' –º–æ–∂–Ω–∞ —Å–∫–ª–∞—Å—Ç–∏ –∑ 10 —é–Ω–∞–∫—ñ–≤ —ñ 15 –¥—ñ–≤—á–∞—Ç?", a: "150", h: "–ù–∞ –∫–æ–∂–Ω–æ–≥–æ —é–Ω–∞–∫–∞ —î 15 –¥—ñ–≤—á–∞—Ç: 10 * 15", s: "10 * 15 = 150" },
        { id: 898, q: "–ö–æ—Å—Ç—é–º —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –±–ª—É–∑–∫–∏ —Ç–∞ —Å–ø—ñ–¥–Ω–∏—Ü—ñ. –°–∫—ñ–ª—å–∫–∏ –∫–æ—Å—Ç—é–º—ñ–≤ –º–æ–∂–Ω–∞ —Å–∫–ª–∞—Å—Ç–∏ –∑ 5 –±–ª—É–∑–æ–∫ —ñ 4 —Å–ø—ñ–¥–Ω–∏—Ü—å?", a: "20", h: "–ü—Ä–∞–≤–∏–ª–æ –¥–æ–±—É—Ç–∫—É", s: "5 * 4 = 20" },
        { id: 899, q: "–°–∫—ñ–ª—å–∫–∏ –∫–æ–º–ø–ª–µ–∫—Ç—ñ–≤ –∑ –æ–¥–Ω—ñ—î—ó —Ä—É—á–∫–∏ (7 –≤–∏–¥—ñ–≤) —ñ –æ–¥–Ω–æ–≥–æ –∑–æ—à–∏—Ç–∞ (5 –≤–∏–¥—ñ–≤) –º–æ–∂–Ω–∞ –æ–±—Ä–∞—Ç–∏?", a: "35", h: "7 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —Ä—É—á–∫–∏ * 5 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –∑–æ—à–∏—Ç–∞", s: "7 * 5 = 35" },
        { id: 900, q: "–°–∫—ñ–ª—å–∫–∏ —á–æ—Ç–∏—Ä–∏—Ü–∏—Ñ—Ä–æ–≤–∏—Ö —á–∏—Å–µ–ª –º–æ–∂–Ω–∞ —Å–∫–ª–∞—Å—Ç–∏ –∑ —Ü–∏—Ñ—Ä 5, 6, 7, 8, —è–∫—â–æ —Ü–∏—Ñ—Ä–∏ <b>–Ω–µ –ø–æ–≤—Ç–æ—Ä—é—é—Ç—å—Å—è</b>?", a: "24", h: "–ù–∞ 1-—à–µ –º—ñ—Å—Ü–µ 4 —Ü–∏—Ñ—Ä–∏, –Ω–∞ 2-–≥–µ ‚Äî 3, –Ω–∞ 3-—Ç—î ‚Äî 2, –Ω–∞ 4-—Ç–µ ‚Äî 1", s: "4 * 3 * 2 * 1 = 24" },
        { id: 901, q: "–°–∫—ñ–ª—å–∫–∏ —Ç—Ä–∏—Ü–∏—Ñ—Ä–æ–≤–∏—Ö —á–∏—Å–µ–ª –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å–∞—Ç–∏ —Ü–∏—Ñ—Ä–∞–º–∏ 1, 2, 3 (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω—å)?", a: "6", h: "3 * 2 * 1", s: "6" },
        { id: 902, q: "–°–∫—ñ–ª—å–∫–∏ –ø–∞—Ä –∑ –æ–¥–Ω–æ–≥–æ –≥–æ–ª–æ—Å–Ω–æ–≥–æ —ñ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–≥–æ–ª–æ—Å–Ω–æ–≥–æ –∑–≤—É–∫—ñ–≤ —É —Å–ª–æ–≤—ñ <b>'—Å—Ç—É–¥–µ–Ω—Ç'</b>?", a: "10", h: "–ì–æ–ª–æ—Å–Ω—ñ: —É, –µ (2). –ü—Ä–∏–≥–æ–ª–æ—Å–Ω—ñ: —Å, —Ç, –¥, –Ω, —Ç (5).", s: "2 * 5 = 10" },
        { id: 903, q: "–°–∫—ñ–ª—å–∫–∏ –ø–∞—Ä –∑ –æ–¥–Ω–æ–≥–æ –≥–æ–ª–æ—Å–Ω–æ–≥–æ —ñ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–≥–æ–ª–æ—Å–Ω–æ–≥–æ –∑–≤—É–∫—ñ–≤ —É —Å–ª–æ–≤—ñ <b>'—Ñ—É–Ω–∫—Ü—ñ—è'</b>?", a: "12", h: "–ì–æ–ª–æ—Å–Ω—ñ: —É, —ñ, —è (3). –ü—Ä–∏–≥–æ–ª–æ—Å–Ω—ñ: —Ñ, –Ω, –∫, —Ü (4).", s: "3 * 4 = 12" },
        { id: 906, q: "–ó –ê –¥–æ –í –≤–µ–¥—É—Ç—å 3 –¥–æ—Ä–æ–≥–∏, –∑ –í –¥–æ –° ‚Äî 2 –¥–æ—Ä–æ–≥–∏. –°–∫—ñ–ª—å–∫–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏ –º–æ–∂–Ω–∞ –¥—ñ–π—Ç–∏ –∑ –ê –¥–æ –°?", a: "6", h: "–ù–∞ –∫–æ–∂–Ω—É –∑ 3-—Ö –¥–æ—Ä—ñ–≥ –¥–æ –í —î 2 –¥–æ—Ä–æ–≥–∏ –¥–∞–ª—ñ", s: "3 * 2 = 6" },
        { id: 907, q: "–ö–æ–∂–Ω—É –∫–ª—ñ—Ç–∏–Ω–∫—É –∫–≤–∞–¥—Ä–∞—Ç–∞ 2—Ö2 –º–æ–∂–Ω–∞ –ø–æ—Ñ–∞—Ä–±—É–≤–∞—Ç–∏ –≤ –∑–µ–ª–µ–Ω–∏–π –∞–±–æ —á–µ—Ä–≤–æ–Ω–∏–π. –°–∫—ñ–ª—å–∫–∏ —î –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤?", a: "16", h: "4 –∫–ª—ñ—Ç–∏–Ω–∫–∏, –¥–ª—è –∫–æ–∂–Ω–æ—ó 2 –≤–∞—Ä—ñ–∞–Ω—Ç–∏: \(2^4\)", s: "2 * 2 * 2 * 2 = 16" },
        { id: 908, q: "–ó 5 —á–ª–µ–Ω—ñ–≤ –ø—Ä–µ–∑–∏–¥—ñ—ó —Ç—Ä–µ–±–∞ –æ–±—Ä–∞—Ç–∏ –≥–æ–ª–æ–≤—É —ñ —Å–µ–∫—Ä–µ—Ç–∞—Ä—è. –°–∫—ñ–ª—å–∫–∏ —Å–ø–æ—Å–æ–±—ñ–≤?", a: "20", h: "–ì–æ–ª–æ–≤–∞ ‚Äî –±—É–¥—å-—Ö—Ç–æ –∑ 5, —Å–µ–∫—Ä–µ—Ç–∞—Ä ‚Äî –∑ 4-—Ö, —â–æ –∑–∞–ª–∏—à–∏–ª–∏—Å—å", s: "5 * 4 = 20" },
        { id: 910, q: "–ö—É–±–∏–∫ –ø—ñ–¥–∫–∏–¥–∞—é—Ç—å –¥–≤—ñ—á—ñ. –°–∫—ñ–ª—å–∫–∏ —Ä—ñ–∑–Ω–∏—Ö –ø–∞—Ä —á–∏—Å–µ–ª –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏?", a: "36", h: "6 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –ø–µ—Ä—à–æ–≥–æ * 6 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –¥—Ä—É–≥–æ–≥–æ", s: "6 * 6 = 36" },
        { id: 911, q: "–ú–æ–Ω–µ—Ç—É –ø—ñ–¥–∫–∏–¥–∞—é—Ç—å —Ç—Ä–∏—á—ñ. –°–∫—ñ–ª—å–∫–∏ —Ä—ñ–∑–Ω–∏—Ö –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç–µ–π –≤–∏–ø–∞–¥–∞–Ω–Ω—è –∞–≤–µ—Ä—Å—É/—Ä–µ–≤–µ—Ä—Å—É?", a: "8", h: "2 * 2 * 2", s: "8" },
        { id: 9121, q: "–°–∫—ñ–ª—å–∫–∏ —Ç—Ä–∏—Ü–∏—Ñ—Ä–æ–≤–∏—Ö —á–∏—Å–µ–ª —Ç—ñ–ª—å–∫–∏ –∑ <b>–Ω–µ–ø–∞—Ä–Ω–∏—Ö</b> —Ü–∏—Ñ—Ä (1,3,5,7,9), —è–∫—â–æ —Ü–∏—Ñ—Ä–∏ <b>–Ω–µ –ø–æ–≤—Ç–æ—Ä—é—é—Ç—å—Å—è</b>?", a: "60", h: "5 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –Ω–∞ —Å–æ—Ç–Ω—ñ, 4 –Ω–∞ –¥–µ—Å—è—Ç–∫–∏, 3 –Ω–∞ –æ–¥–∏–Ω–∏—Ü—ñ", s: "5 * 4 * 3 = 60" },
        { id: 9122, q: "–¢–µ —Å–∞–º–µ, –∞–ª–µ —Ü–∏—Ñ—Ä–∏ <b>–º–æ–∂—É—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏—Å—è</b>?", a: "125", h: "5 * 5 * 5", s: "125" },
        { id: 919, q: "–£ —Ç—É—Ä–Ω—ñ—Ä—ñ 10 —à–∞—Ö—ñ—Å—Ç—ñ–≤. –ö–æ–∂–µ–Ω –∑—ñ–≥—Ä–∞–≤ –∑ –∫–æ–∂–Ω–∏–º –ø–æ –æ–¥–Ω—ñ–π –ø–∞—Ä—Ç—ñ—ó. –°–∫—ñ–ª—å–∫–∏ –≤—Å—å–æ–≥–æ –ø–∞—Ä—Ç—ñ–π?", a: "45", h: "–ö–æ–∂–µ–Ω –∑ 10 –≥—Ä–∞–≤ –∑ 9-–º–∞, –∞–ª–µ –ø–∞—Ä—Ç—ñ—è –ê-–ë —Ç–∞ –ë-–ê –æ–¥–Ω–∞–∫–æ–≤–∞: (10*9)/2", s: "(10 * 9) / 2 = 45" },
        { id: 915, q: "–ù–∞ –ø–æ–ª–∏—Ü—ñ 6 —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—Ä—É—á–Ω–∏–∫—ñ–≤. –ê–ª–≥–µ–±—Ä–∞ –º–∞—î –±—É—Ç–∏ –∫—Ä–∞–π–Ω—å–æ—é –ª—ñ–≤–æ—Ä—É—á. –°–∫—ñ–ª—å–∫–∏ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —Ä–æ–∑—Å—Ç–∞–Ω–æ–≤–∫–∏?", a: "120", h: "–ü–µ—Ä—à–µ –º—ñ—Å—Ü–µ –∑–∞–π–Ω—è—Ç–µ. –õ–∏—à–∏–ª–æ—Å—è 5 –º—ñ—Å—Ü—å –¥–ª—è 5 –∫–Ω–∏–≥.", s: "5 * 4 * 3 * 2 * 1 = 120" },
        { id: 921, q: "–°–∫—ñ–ª—å–∫–∏ –Ω–µ–ø–∞—Ä–Ω–∏—Ö —á–æ—Ç–∏—Ä–∏—Ü–∏—Ñ—Ä–æ–≤–∏—Ö —á–∏—Å–µ–ª –∑ —Ü–∏—Ñ—Ä 2, 3, 4, 5, 6 (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω—å)?", a: "48", h: "–û—Å—Ç–∞–Ω–Ω—è —Ü–∏—Ñ—Ä–∞ –º–∞—î –±—É—Ç–∏ 3 –∞–±–æ 5 (2 –≤–∞—Ä). –î–ª—è —ñ–Ω—à–∏—Ö 3-—Ö –º—ñ—Å—Ü—å –ª–∏—à–∞—î—Ç—å—Å—è 4, 3, 2 –≤–∞—Ä.", s: "2 * (4 * 3 * 2) = 48" }
    ];

    const testData = [
        { q: "–°–∫—ñ–ª—å–∫–∏ –¥–≤–æ—Ü–∏—Ñ—Ä–æ–≤–∏—Ö —á–∏—Å–µ–ª –º–æ–∂–Ω–∞ —Å–∫–ª–∞—Å—Ç–∏ –∑ —Ü–∏—Ñ—Ä 1, 2, 3, —è–∫—â–æ —Ü–∏—Ñ—Ä–∏ –º–æ–∂—É—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏—Å—å?", a: "9" },
        { q: "–£ –∫–∞—Ñ–µ 3 –≤–∏–¥–∏ —á–∞—é —ñ 5 –≤–∏–¥—ñ–≤ —Ç—ñ—Å—Ç–µ—á–æ–∫. –°–∫—ñ–ª—å–∫–∏ —Å–ø–æ—Å–æ–±—ñ–≤ –≤–∏–±—Ä–∞—Ç–∏ '—á–∞–π + —Ç—ñ—Å—Ç–µ—á–∫–æ'?", a: "15" },
        { q: "–°–∫—ñ–ª—å–∫–∏ —Å–ø–æ—Å–æ–±—ñ–≤ –æ–±—Ä–∞—Ç–∏ –∫–∞–ø—ñ—Ç–∞–Ω–∞ —Ñ—É—Ç–±–æ–ª—å–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏ (11 –≥—Ä–∞–≤—Ü—ñ–≤)?", a: "11" },
        { q: "–°–∫—ñ–ª—å–∫–∏ —î —Å–ø–æ—Å–æ–±—ñ–≤ –≤–∏—à–∏–∫—É–≤–∞—Ç–∏ 3-—Ö —É—á–Ω—ñ–≤ —É —á–µ—Ä–≥—É?", a: "6" }
    ];

    let solvedCount = 0;

    function initTasks() {
        const container = document.getElementById('tasks-list');
        tasksData.forEach((task, idx) => {
            const div = document.createElement('div');
            div.id = `task-${idx}`;
            div.className = "task-card bg-white p-5 rounded-2xl shadow-sm";
            div.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <span class="text-[9px] font-black text-slate-300 uppercase tracking-widest">–ó–∞–≤–¥–∞–Ω–Ω—è ‚Ññ${task.id}</span>
                    <span id="check-${idx}" class="hidden text-green-500 font-bold text-[10px]">‚úÖ –ì–û–¢–û–í–û</span>
                </div>
                <div class="text-sm font-medium text-slate-700 mb-4">${task.q}</div>
                <div class="flex gap-2">
                    <input type="text" id="input-${idx}" onkeypress="if(event.key==='Enter') checkTask(${idx})" 
                        class="flex-1 bg-slate-50 rounded-xl px-4 py-2 border-2 border-transparent focus:border-indigo-400 outline-none transition text-sm" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å...">
                    <button onclick="checkTask(${idx})" class="bg-indigo-600 text-white px-4 rounded-xl font-bold hover:bg-indigo-700 transition">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                </div>
                <div class="mt-3 flex gap-3">
                    <button onclick="toggleInfo(${idx}, 'hint')" class="text-[9px] font-bold text-indigo-400 hover:text-indigo-600 uppercase">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
                    <button onclick="toggleInfo(${idx}, 'sol')" class="text-[9px] font-bold text-slate-300 hover:text-slate-500 uppercase ml-auto">–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è</button>
                </div>
                <div id="hint-${idx}" class="hidden mt-2 p-3 bg-indigo-50 rounded-xl text-[11px] text-indigo-700 italic border-l-2 border-indigo-200">üí° ${task.h}</div>
                <div id="sol-${idx}" class="hidden mt-2 p-3 bg-slate-50 rounded-xl text-[11px] font-mono text-slate-600">–†–µ–∑—É–ª—å—Ç–∞—Ç: ${task.s}</div>
            `;
            container.appendChild(div);
        });
        MathJax.typeset();
    }

    function checkTask(idx) {
        const input = document.getElementById(`input-${idx}`);
        const val = input.value.trim().toLowerCase();
        if (val === tasksData[idx].a.toLowerCase()) {
            if (!document.getElementById(`task-${idx}`).classList.contains('solved-card')) {
                solvedCount++;
                updateProgress();
            }
            document.getElementById(`task-${idx}`).classList.add('solved-card');
            document.getElementById(`check-${idx}`).classList.remove('hidden');
            input.disabled = true;
        } else {
            input.classList.add('border-red-400', 'animate-pulse');
            setTimeout(() => input.classList.remove('border-red-400', 'animate-pulse'), 500);
        }
    }

    function updateProgress() {
        const p = (solvedCount / tasksData.length) * 100;
        document.getElementById('prog-bar').style.width = p + '%';
        document.getElementById('prog-label').innerText = `–ü—Ä–æ–≥—Ä–µ—Å: ${solvedCount}/${tasksData.length}`;
        if (solvedCount >= 10) document.getElementById('test-zone').classList.remove('hidden');
        if (solvedCount === tasksData.length) initTest();
    }

    function initTest() {
        const cont = document.getElementById('test-questions');
        if (cont.innerHTML !== "") return;
        testData.forEach((t, i) => {
            cont.innerHTML += `
                <div class="p-4 bg-white/5 rounded-xl border border-white/10">
                    <p class="mb-3 text-sm font-medium text-indigo-100">${i+1}. ${t.q}</p>
                    <input type="text" id="test-input-${i}" class="w-full bg-white/10 border-b border-white/30 outline-none focus:border-indigo-400 py-1 text-white">
                </div>`;
        });
    }

    function checkTest() {
        let correct = 0;
        testData.forEach((t, i) => {
            if (document.getElementById(`test-input-${i}`).value.trim() === t.a) correct++;
        });
        alert(`–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É: ${correct} –∑ ${testData.length}`);
    }

    function toggleInfo(idx, type) {
        document.getElementById(`${type}-${idx}`).classList.toggle('hidden');
    }

    // CANVAS LOGIC
    const canvas = document.getElementById('whiteboard');
    const ctx = canvas.getContext('2d');
    let drawing = false, tool = 'pen', hasGrid = false;

    function initCanvas() {
        const p = document.getElementById('canvas-parent');
        canvas.width = p.clientWidth;
        canvas.height = p.clientHeight;
        ctx.lineCap = 'round';
        ctx.lineWidth = 2.5;
    }

    function setTool(t) {
        tool = t;
        document.getElementById('btn-pen').classList.toggle('tool-active', t === 'pen');
        document.getElementById('btn-eraser').classList.toggle('tool-active', t === 'eraser');
    }

    function toggleGrid() {
        hasGrid = !hasGrid;
        document.getElementById('btn-grid').classList.toggle('tool-active', hasGrid);
        clearCanvas();
        if(hasGrid) {
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 0.5;
            for(let x=0; x<canvas.width; x+=30) { ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,canvas.height); ctx.stroke(); }
            for(let y=0; y<canvas.height; y+=30) { ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(canvas.width,y); ctx.stroke(); }
            ctx.lineWidth = 2.5;
        }
    }

    canvas.onmousedown = (e) => { drawing = true; ctx.beginPath(); const pos = getPos(e); ctx.moveTo(pos.x, pos.y); };
    canvas.onmousemove = (e) => { 
        if (!drawing) return; 
        const pos = getPos(e);
        ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : '#4338ca';
        ctx.lineWidth = tool === 'eraser' ? 25 : 2.5;
        ctx.lineTo(pos.x, pos.y); 
        ctx.stroke();
    };
    window.onmouseup = () => drawing = false;

    function getPos(e) { 
        const r = canvas.getBoundingClientRect(); 
        return { x: e.clientX - r.left, y: e.clientY - r.top }; 
    }

    function clearCanvas() { ctx.clearRect(0,0,canvas.width,canvas.height); if(hasGrid) { hasGrid = false; toggleGrid(); } }

    function finishLesson() {
        const score = Math.round((solvedCount / tasksData.length) * 12);
        document.getElementById('res-score').innerText = `${score} / 12`;
        
        let msg = "";
        let icon = "üåü";
        if (score >= 10) { msg = "–ù–µ–π–º–æ–≤—ñ—Ä–Ω–æ! –¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –º–∞–π—Å—Ç–µ—Ä –∫–æ–º–±—ñ–Ω–∞—Ç–æ—Ä–∏–∫–∏!"; icon = "üèÜ"; }
        else if (score >= 7) { msg = "–ì–∞—Ä–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –°–ø—Ä–æ–±—É–π —Ä–æ–∑–≤'—è–∑–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ—à—ñ –∑–∞–¥–∞—á—ñ."; icon = "üëç"; }
        else { msg = "–¢–æ–±—ñ –≤–∞—Ä—Ç–æ —â–µ —Ä–∞–∑ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ —Å—É–º–∏ —Ç–∞ –¥–æ–±—É—Ç–∫—É."; icon = "üìö"; }
        
        document.getElementById('res-msg').innerText = msg;
        document.getElementById('modal-icon').innerText = icon;
        document.getElementById('modal').classList.remove('hidden');
    }

    window.onload = () => { initTasks(); initCanvas(); };
    window.onresize = initCanvas;
</script>
</body>
</html>