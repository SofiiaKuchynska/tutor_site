<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ–æ—Ä–µ–º–∏ –°–∏–Ω—É—Å—ñ–≤ —Ç–∞ –ö–æ—Å–∏–Ω—É—Å—ñ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.MathJax = {
            tex: { inlineMath: [['\\(', '\\)']], displayMath: [['\\[', '\\]']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; overflow: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .task-card { border: 1px solid #e2e8f0; transition: all 0.3s ease; background: white; margin-bottom: 1.5rem; }
        .task-card:hover { border-color: #6366f1; box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.1); }
        .input-base {
            width: 100%; padding: 0.75rem 1rem; border-radius: 0.75rem; border: 2px solid #e2e8f0; 
            background-color: #f8fafc; font-weight: 600; outline: none; transition: all 0.2s;
        }
        .input-correct { border-color: #22c55e !important; background-color: #dcfce7 !important; color: #166534 !important; }
        .input-wrong { border-color: #ef4444 !important; background-color: #fee2e2 !important; color: #991b1b !important; }
        .canvas-container { position: relative; background: #ffffff; cursor: crosshair; touch-action: none; }
        .tool-active { background-color: #4f46e5; color: #ffffff; }
        .theory-pop { background: #f1f5f9; border-radius: 1rem; padding: 1rem; display: none; margin-top: 1rem; border-left: 4px solid #6366f1; }
    </style>
</head>
<body class="h-screen flex text-slate-900">

    <div class="w-full lg:w-1/2 flex flex-col bg-white border-r border-slate-200 shadow-xl z-10 relative">
        <header class="p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white/95 backdrop-blur-md z-30">
            <div>
                <h1 class="text-2xl font-black text-slate-800 tracking-tight">–ì–µ–æ–º–µ—Ç—Ä—ñ—è</span></h1>
                <p class="text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5">–°–∏–Ω—É—Å–∏ —Ç–∞ –ö–æ—Å–∏–Ω—É—Å–∏</p>
            </div>
            <div class="flex flex-col items-end">
                <span id="prog-text" class="text-xs font-black text-indigo-600 uppercase mb-1">–í–∏–∫–æ–Ω–∞–Ω–æ: 0 / 30</span>
                <div class="w-32 h-2 bg-slate-100 rounded-full overflow-hidden">
                    <div id="prog-bar" class="h-full bg-indigo-500 transition-all duration-700" style="width: 0%"></div>
                </div>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-6 lg:p-10 space-y-12 custom-scrollbar pb-32">
            
            <section class="space-y-4">
                <div class="flex items-center gap-4">
                    <span class="text-3xl">üîó</span>
                    <h2 class="text-xl font-black text-slate-800">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–∑–∏ (Naurok)</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <a href="https://naurok.com.ua/test/start/399341" target="_blank" class="p-4 border-2 border-indigo-50 rounded-2xl bg-indigo-50/30 hover:bg-indigo-50 transition flex items-center justify-between group">
                        <span class="font-bold text-indigo-700 text-sm">–¢–µ—Å—Ç 1: –¢–µ–æ—Ä–µ–º–∞ —Å–∏–Ω—É—Å—ñ–≤ —ñ –∫–æ—Å–∏–Ω—É—Å—ñ–≤</span>
                        <span class="group-hover:translate-x-1 transition">‚û°Ô∏è</span>
                    </a>
                    <a href="https://naurok.com.ua/test/start/777217" target="_blank" class="p-4 border-2 border-emerald-50 rounded-2xl bg-emerald-50/30 hover:bg-emerald-50 transition flex items-center justify-between group">
                        <span class="font-bold text-emerald-700 text-sm">–¢–µ—Å—Ç 2: –ó–Ω–∞—á–µ–Ω–Ω—è —Å–∏–Ω—É—Å—ñ–≤ —ñ –∫–æ—Å–∏–Ω—É—Å—ñ–≤</span>
                        <span class="group-hover:translate-x-1 transition">‚û°Ô∏è</span>
                    </a>
                </div>
            </section>

            <section id="tasks-container" class="space-y-8">
                </section>

            <div class="pt-8">
                <button onclick="finishLesson()" class="w-full bg-slate-900 text-white py-6 rounded-[2.5rem] font-black text-xl hover:bg-indigo-600 transition-all shadow-xl active:scale-95">–ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö</button>
            </div>
        </main>
    </div>

    <div class="hidden lg:flex w-1/2 flex-col bg-slate-50 p-8 h-screen relative">
        <div class="absolute top-10 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-white p-3 rounded-2xl shadow-xl border border-slate-100">
            <button onclick="setTool('pen')" id="tool-pen" class="p-4 rounded-xl tool-active transition">‚úèÔ∏è</button>
            <button onclick="setTool('eraser')" id="tool-eraser" class="p-4 rounded-xl hover:bg-slate-100 transition">üßΩ</button>
            <div class="w-px h-10 bg-slate-200 mx-2"></div>
            <button onclick="drawGeometry('triangle')" class="px-4 py-2 text-[10px] font-black text-slate-400 hover:bg-indigo-50 rounded-xl transition">‚ñ≥ –¢–†–ò–ö–£–¢–ù–ò–ö</button>
            <button onclick="drawGeometry('circle')" class="px-4 py-2 text-[10px] font-black text-slate-400 hover:bg-indigo-50 rounded-xl transition">‚óã –ö–û–õ–û</button>
            <button onclick="clearCanvas()" class="p-4 text-red-500 hover:bg-red-50 rounded-xl transition">üóëÔ∏è</button>
        </div>
        <div class="canvas-container flex-1 bg-white rounded-[3.5rem] shadow-sm border border-slate-200 overflow-hidden mt-20" id="canvas-wrap">
            <canvas id="whiteboard"></canvas>
        </div>
    </div>

    <div id="result-modal" class="fixed inset-0 bg-slate-900/80 backdrop-blur-md z-50 hidden flex items-center justify-center p-6">
        <div class="bg-white rounded-[3rem] p-12 max-w-md w-full text-center shadow-2xl">
            <div class="text-7xl mb-6">üèÜ</div>
            <h2 class="text-3xl font-black text-slate-800 mb-2">–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞!</h2>
            <div class="bg-indigo-50 rounded-3xl p-6 mb-8">
                <p id="res-score" class="text-indigo-600 font-black text-6xl">0 / 30</p>
                <p class="text-xs font-bold text-indigo-400 uppercase mt-2">–¢–≤—ñ–π —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –±–∞–ª</p>
            </div>
            <p id="res-msg" class="text-slate-600 mb-8 font-medium italic">–¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –º–∞–π—Å—Ç–µ—Ä –≥–µ–æ–º–µ—Ç—Ä—ñ—ó!</p>
            <button onclick="location.reload()" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-bold hover:bg-indigo-600 transition shadow-lg">–©–ï –†–ê–ó?</button>
        </div>
    </div>

<script>
    const allTasks = [
        // –¢–ï–û–†–ï–ú–ê –°–ò–ù–£–°–Ü–í (15 –∑–∞–¥–∞—á)
        { id: 1, q: "–£ \\( \\triangle ABC \\): \\( a=10 \\), \\( \\sin A = 0.5 \\), \\( \\sin B = 0.3 \\). –ó–Ω–∞–π–¥–∏ —Å—Ç–æ—Ä–æ–Ω—É \\( b \\).", a: "6", h: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π: \\( a/\\sin A = b/\\sin B \\)", s: "10 / 0.5 = b / 0.3 => 20 = b / 0.3 => b = 6" },
        { id: 2, q: "–ó–Ω–∞–π–¥–∏ –¥—ñ–∞–º–µ—Ç—Ä –æ–ø–∏—Å–∞–Ω–æ–≥–æ –∫–æ–ª–∞ (2R), —è–∫—â–æ \\( a=5 \\) —Å–º —ñ –∫—É—Ç –ø—Ä–æ—Ç–∏ –Ω–µ—ó 30¬∞.", a: "10", h: "–§–æ—Ä–º—É–ª–∞: \\( a/\\sin A = 2R \\)", s: "5 / sin 30 = 5 / 0.5 = 10" },
        { id: 3, q: "–°—Ç–æ—Ä–æ–Ω–∞ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ 12 —Å–º. –ö—É—Ç –Ω–∞–≤–ø—Ä–æ—Ç–∏ ‚Äî 150¬∞. –ó–Ω–∞–π–¥–∏ —Ä–∞–¥—ñ—É—Å –æ–ø–∏—Å–∞–Ω–æ–≥–æ –∫–æ–ª–∞ R.", a: "12", h: "–ù–µ –∑–∞–±—É–¥—å, —â–æ \\( \\sin 150 = \\sin 30 = 0.5 \\). –ü–æ—Ç—ñ–º \\( R = a / (2\\sin A) \\)", s: "12 / (2 * 0.5) = 12 / 1 = 12" },
        { id: 4, q: "–£ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É \\( a=8, b=4 \\). –Ø–∫—â–æ \\( \\sin A = 0.4 \\), —á–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î \\( \\sin B \\)?", a: "0.2", h: "–í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω –¥–æ—Ä—ñ–≤–Ω—é—î –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—é —Å–∏–Ω—É—Å—ñ–≤.", s: "8 / 0.4 = 4 / sin B => 20 = 4 / sin B => sin B = 0.2" },
        { id: 5, q: "–ó–Ω–∞–π–¥–∏ –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è \\( a/b \\), —è–∫—â–æ –∫—É—Ç \\( A=45^\\circ \\), –∞ –∫—É—Ç \\( B=30^\\circ \\). (–í–≤–µ–¥–∏ —á–∏—Å–ª–æ–º \\( \\sqrt{2} \\) ‚âà 1.41)", a: "1.41", h: "a/b = sin A / sin B", s: "sin 45 / sin 30 = (‚àö2/2) / (1/2) = ‚àö2 ‚âà 1.41" },
        { id: 6, q: "–°—Ç–æ—Ä–æ–Ω–∞ –ø—Ä–æ—Ç–∏ –∫—É—Ç–∞ 45¬∞ –¥–æ—Ä—ñ–≤–Ω—é—î \\( 4\\sqrt{2} \\). –ó–Ω–∞–π–¥–∏ —Å—Ç–æ—Ä–æ–Ω—É –ø—Ä–æ—Ç–∏ –∫—É—Ç–∞ 30¬∞.", a: "4", h: "4‚àö2 / sin 45 = x / sin 30", s: "4‚àö2 / (‚àö2/2) = x / 0.5 => 8 = x / 0.5 => x = 4" },
        { id: 7, q: "–ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —â–æ –≤ –±—É–¥—å-—è–∫–æ–º—É —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É –ø—Ä–æ—Ç–∏ –±—ñ–ª—å—à–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏ –ª–µ–∂–∏—Ç—å –∫—É—Ç –∑ –±—ñ–ª—å—à–∏–º —Å–∏–Ω—É—Å–æ–º? (1 - —Ç–∞–∫, 0 - –Ω—ñ)", a: "1", h: "–¶–µ –ø—Ä—è–º–∏–π –Ω–∞—Å–ª—ñ–¥–æ–∫ —Ç–µ–æ—Ä–µ–º–∏ —Å–∏–Ω—É—Å—ñ–≤.", s: "–¢–∞–∫, —Ü–µ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü—ñ—ó." },
        { id: 8, q: "–£ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É \\( R=10 \\). –ó–Ω–∞–π–¥–∏ —Å—Ç–æ—Ä–æ–Ω—É, —â–æ –ª–µ–∂–∏—Ç—å –ø—Ä–æ—Ç–∏ –∫—É—Ç–∞ 60¬∞. (–í–≤–µ–¥–∏ —á–∏—Å–ª–æ–º \\( 10\\sqrt{3} \\) ‚âà 17.3)", a: "17.3", h: "a = 2R * sin A", s: "20 * sin 60 = 20 * (‚àö3/2) = 10‚àö3 ‚âà 17.3" },
        { id: 9, q: "–°—Ç–æ—Ä–æ–Ω–∏ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ 4 —ñ 6. –°–∏–Ω—É—Å –∫—É—Ç–∞ –ø—Ä–æ—Ç–∏ –±—ñ–ª—å—à–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏ ‚Äî 0.9. –ó–Ω–∞–π–¥–∏ —Å–∏–Ω—É—Å –∫—É—Ç–∞ –ø—Ä–æ—Ç–∏ –º–µ–Ω—à–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏.", a: "0.6", h: "6 / 0.9 = 4 / x", s: "x = (4 * 0.9) / 6 = 3.6 / 6 = 0.6" },
        { id: 10, q: "–ö—É—Ç –ê = 120¬∞, –∞ = 3‚àö3. –ó–Ω–∞–π–¥–∏ –¥—ñ–∞–º–µ—Ç—Ä –∫–æ–ª–∞ 2R.", a: "6", h: "sin 120 = sin 60 = ‚àö3/2", s: "3‚àö3 / (‚àö3/2) = 6" },
        { id: 11, q: "–£ \\( \\triangle ABC \\) —Å—Ç–æ—Ä–æ–Ω–∏ –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω—ñ 2:3:4. –°–∏–Ω—É—Å –Ω–∞–π–º–µ–Ω—à–æ–≥–æ –∫—É—Ç–∞ ‚Äî 0.2. –ó–Ω–∞–π–¥–∏ —Å–∏–Ω—É—Å —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–∞ –≤–µ–ª–∏—á–∏–Ω–æ—é –∫—É—Ç–∞.", a: "0.3", h: "2/0.2 = 3/sin B", s: "sin B = 0.3" },
        { id: 12, q: "–ö—É—Ç–∏ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ 100¬∞ —ñ 50¬∞. –ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î —Ç—Ä–µ—Ç—ñ–π –∫—É—Ç?", a: "30", h: "–°—É–º–∞ –∫—É—Ç—ñ–≤ = 180¬∞.", s: "180 - 100 - 50 = 30" },
        { id: 13, q: "–ó–Ω–∞–π–¥–∏ –ø–ª–æ—â—É —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞, —è–∫—â–æ \\( a=10, b=12, \\sin C = 0.5 \\).", a: "30", h: "S = 0.5 * a * b * sin C", s: "0.5 * 10 * 12 * 0.5 = 30" },
        { id: 14, q: "–°—Ç–æ—Ä–æ–Ω–∞ 15, —Å–∏–Ω—É—Å –Ω–∞–≤–ø—Ä–æ—Ç–∏ 0.75. –†–∞–¥—ñ—É—Å R?", a: "10", h: "R = a / (2 sin A)", s: "15 / (2 * 0.75) = 15 / 1.5 = 10" },
        { id: 15, q: "–°–∏–Ω—É—Å –≥–æ—Å—Ç—Ä–æ–≥–æ –∫—É—Ç–∞ –ø—Ä—è–º–æ–∫—É—Ç–Ω–æ–≥–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ 0.8. –ì—ñ–ø–æ—Ç–µ–Ω—É–∑–∞ 10. –ü—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π –∫–∞—Ç–µ—Ç?", a: "8", h: "a = c * sin A", s: "10 * 0.8 = 8" },

        // –¢–ï–û–†–ï–ú–ê –ö–û–°–ò–ù–£–°–Ü–í (15 –∑–∞–¥–∞—á)
        { id: 16, q: "–ó–Ω–∞–π–¥–∏ —Å—Ç–æ—Ä–æ–Ω—É \\( c \\), —è–∫—â–æ \\( a=3, b=4 \\), –∞ –∫—É—Ç –º—ñ–∂ –Ω–∏–º–∏ 90¬∞.", a: "5", h: "–ü—Ä–∏ cos 90 = 0 —Ç–µ–æ—Ä–µ–º–∞ —Å—Ç–∞—î –ü—ñ—Ñ–∞–≥–æ—Ä–æ–º.", s: "‚àö(9+16) = 5" },
        { id: 17, q: "–ó–Ω–∞–π–¥–∏ \\( c^2 \\), —è–∫—â–æ \\( a=5, b=8, \\cos C = 0.5 \\).", a: "49", h: "c¬≤ = a¬≤ + b¬≤ - 2ab cos C", s: "25 + 64 - 2*5*8*0.5 = 89 - 40 = 49" },
        { id: 18, q: "–°—Ç–æ—Ä–æ–Ω–∏ 3, 5, 7. –ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î –∫–æ—Å–∏–Ω—É—Å –∫—É—Ç–∞ –ø—Ä–æ—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–∏ 7?", a: "-0.5", h: "7¬≤ = 3¬≤ + 5¬≤ - 2*3*5*cos C", s: "49 = 9 + 25 - 30cos C => 15 = -30cos C => cos C = -0.5" },
        { id: 19, q: "–°—Ç–æ—Ä–æ–Ω–∏ 3 —ñ 4, –∫—É—Ç –º—ñ–∂ –Ω–∏–º–∏ 60¬∞. –ó–Ω–∞–π–¥–∏ —Ç—Ä–µ—Ç—é —Å—Ç–æ—Ä–æ–Ω—É (–Ω–∞–±–ª–∏–∂–µ–Ω–æ \\( \\sqrt{13} \\) ‚âà 3.61).", a: "3.61", h: "cos 60 = 0.5", s: "9+16 - 2*3*4*0.5 = 25-12 = 13. ‚àö13 ‚âà 3.61" },
        { id: 20, q: "–ì–æ—Å—Ç—Ä–∏–π –∫—É—Ç —Ä–æ–º–±–∞ –∑—ñ —Å—Ç–æ—Ä–æ–Ω–æ—é 6 ‚Äî 60¬∞. –ó–Ω–∞–π–¥–∏ –º–µ–Ω—à—É –¥—ñ–∞–≥–æ–Ω–∞–ª—å.", a: "6", h: "–¢—Ä–∏–∫—É—Ç–Ω–∏–∫ –∑ –∫—É—Ç–æ–º 60¬∞ —Ç–∞ —Ä—ñ–≤–Ω–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ ‚Äî —Ä—ñ–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π.", s: "d¬≤ = 36+36 - 2*36*0.5 = 36 => d=6" },
        { id: 21, q: "–°—Ç–æ—Ä–æ–Ω–∞ —Ä–æ–º–±–∞ 6, –∞ –≥–æ—Å—Ç—Ä–∏–π –∫—É—Ç 30¬∞. –ü–ª–æ—â–∞?", a: "18", h: "S = a¬≤ * sin Œ±", s: "36 * 0.5 = 18" },
        { id: 22, q: "–î—ñ–∞–≥–æ–Ω–∞–ª—ñ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º–∞ 4 —ñ 6, –∫—É—Ç –º—ñ–∂ –Ω–∏–º–∏ 30¬∞. –ü–ª–æ—â–∞?", a: "6", h: "S = 0.5 * d1 * d2 * sin œÜ", s: "0.5 * 4 * 6 * 0.5 = 6" },
        { id: 23, q: "–£ –ø–∞—Ä–∞–ª–µ–ª–æ–≥—Ä–∞–º—ñ —Å—Ç–æ—Ä–æ–Ω–∏ 3 —ñ 5, –∞ –∫—É—Ç 60¬∞. –ó–Ω–∞–π–¥–∏ –±—ñ–ª—å—à—É –¥—ñ–∞–≥–æ–Ω–∞–ª—å.", a: "7", h: "–¢—É–ø–∏–π –∫—É—Ç = 120¬∞, cos 120 = -0.5", s: "9 + 25 - 2*3*5*(-0.5) = 34 + 15 = 49. d=7" },
        { id: 24, q: "–°—Ç–æ—Ä–æ–Ω–∏ 4, 5, 6. –ó–Ω–∞–π–¥–∏ –∫–æ—Å–∏–Ω—É—Å –Ω–∞–π–º–µ–Ω—à–æ–≥–æ –∫—É—Ç–∞ (–ø—Ä–æ—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–∏ 4).", a: "0.75", h: "4¬≤ = 5¬≤ + 6¬≤ - 2*5*6*cos A", s: "16 = 25+36 - 60cos A => 45 = 60cos A => 0.75" },
        { id: 25, q: "–ú–µ–¥—ñ–∞–Ω–∞ –¥–æ —Å—Ç–æ—Ä–æ–Ω–∏ 10 –ø—Ä—è–º–æ–∫—É—Ç–Ω–æ–≥–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –¥–æ—Ä—ñ–≤–Ω—é—î?", a: "5", h: "–ú–µ–¥—ñ–∞–Ω–∞ –¥–æ –≥—ñ–ø–æ—Ç–µ–Ω—É–∑–∏ –¥–æ—Ä—ñ–≤–Ω—é—î —ó—ó –ø–æ–ª–æ–≤–∏–Ω—ñ.", s: "10 / 2 = 5" },
        { id: 26, q: "–°—Ç–æ—Ä–æ–Ω–∏ 13, 14, 15. –ó–Ω–∞–π–¥–∏ –ø–ª–æ—â—É —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞.", a: "84", h: "–§–æ—Ä–º—É–ª–∞ –ì–µ—Ä–æ–Ω–∞: p = 21, S = ‚àö(21*8*7*6).", s: "‚àö7056 = 84" },
        { id: 27, q: "–ó–Ω–∞–π–¥–∏ –≤–∏—Å–æ—Ç—É –¥–æ —Å—Ç–æ—Ä–æ–Ω–∏ 14 —É —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É –∑—ñ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ 13, 14, 15.", a: "12", h: "h = 2S / a. –ü–ª–æ—â—É –º–∏ –≤–∂–µ –∑–Ω–∞—î–º–æ (84).", s: "168 / 14 = 12" },
        { id: 28, q: "–°—Ç–æ—Ä–æ–Ω–∞ 10, –∫—É—Ç–∏ –ø—Ä–∏ –Ω—ñ–π 45¬∞ —ñ 45¬∞. –ó–Ω–∞–π–¥–∏ –ø–ª–æ—â—É.", a: "25", h: "–¶–µ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–π —Ä—ñ–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–∏–π —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫.", s: "S = (10¬≤ / 4) = 25" },
        { id: 29, q: "–ö–æ—Å–∏–Ω—É—Å —è–∫–æ–≥–æ –∫—É—Ç–∞ –¥–æ—Ä—ñ–≤–Ω—é—î -1?", a: "180", h: "–¶–µ –∫—Ä–∞–π–Ω—è –ª—ñ–≤–∞ —Ç–æ—á–∫–∞ –∫–æ–ª–∞.", s: "180¬∞" },
        { id: 30, q: "–Ø–∫—â–æ —Å—Ç–æ—Ä–æ–Ω–∏ 5, 12, 13, —Ç–æ –∫—É—Ç –Ω–∞–≤–ø—Ä–æ—Ç–∏ 13 –¥–æ—Ä—ñ–≤–Ω—é—î?", a: "90", h: "–ü–µ—Ä–µ–≤—ñ—Ä: 5¬≤+12¬≤=13¬≤.", s: "–¢–∞–∫, —Ü–µ —Ç–µ–æ—Ä–µ–º–∞ –ü—ñ—Ñ–∞–≥–æ—Ä–∞." }
    ];

    let score = 0;
    let answered = 0;
    const TOTAL = 30;

    function renderTasks() {
        const container = document.getElementById('tasks-container');
        allTasks.forEach(t => {
            const card = document.createElement('div');
            card.className = 'task-card p-6 rounded-[2rem] space-y-4';
            const inputType = t.type === 'text' ? 'text' : 'number';
            
            card.innerHTML = `
                <div class="flex justify-between items-start">
                    <p class="font-black text-slate-800 tracking-tight pr-4">–ó–∞–≤–¥–∞–Ω–Ω—è #${t.id}: ${t.q}</p>
                </div>
                <div class="flex gap-2">
                    <input type="${inputType}" step="0.01" id="in-${t.id}" class="input-base" placeholder="–í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ...">
                    <button onclick="checkAnswer(${t.id}, '${t.a}')" class="bg-indigo-600 text-white px-6 rounded-2xl font-black hover:bg-indigo-700 transition active:scale-95">OK</button>
                </div>
                <div class="flex gap-4">
                    <button onclick="toggleInfo('h-${t.id}')" class="text-[10px] font-black uppercase text-slate-400 hover:text-indigo-500 transition">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>
                    <button onclick="toggleInfo('s-${t.id}')" class="text-[10px] font-black uppercase text-slate-400 hover:text-indigo-500 transition">üîç –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è</button>
                </div>
                <div id="h-${t.id}" class="theory-pop text-xs text-slate-600">${t.h}</div>
                <div id="s-${t.id}" class="theory-pop text-xs text-indigo-700 font-medium italic bg-indigo-50 border-indigo-200">
                    <p class="mb-1 uppercase font-black text-[9px] tracking-widest">–•—ñ–¥ –¥—É–º–æ–∫:</p>
                    ${t.s}
                </div>
            `;
            container.appendChild(card);
        });
        MathJax.typeset();
    }

    function checkAnswer(id, correct) {
        const input = document.getElementById(`in-${id}`);
        if(input.disabled) return;

        const userVal = input.value.trim().toLowerCase();
        const corrVal = correct.toLowerCase();

        const isCorrect = (userVal == corrVal) || (Math.abs(parseFloat(userVal) - parseFloat(corrVal)) < 0.1);

        if(isCorrect) {
            input.classList.add('input-correct');
            score++;
            updateProgress();
        } else {
            input.classList.add('input-wrong');
            setTimeout(() => input.classList.remove('input-wrong'), 800);
        }
        input.disabled = true;
        answered++;
    }

    function updateProgress() {
        document.getElementById('prog-text').innerText = `–í–∏–∫–æ–Ω–∞–Ω–æ: ${answered} / ${TOTAL}`;
        document.getElementById('prog-bar').style.width = `${(answered/TOTAL)*100}%`;
    }

    function toggleInfo(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    // WHITEBOARD LOGIC
    const canvas = document.getElementById('whiteboard');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;
    let tool = 'pen';

    function initCanvas() {
        const wrap = document.getElementById('canvas-wrap');
        canvas.width = wrap.clientWidth;
        canvas.height = wrap.clientHeight;
        ctx.lineCap = 'round';
        ctx.lineWidth = 3;
    }

    canvas.addEventListener('mousedown', () => { isDrawing = true; ctx.beginPath(); });
    canvas.addEventListener('mousemove', (e) => {
        if(!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        ctx.strokeStyle = tool === 'pen' ? '#1e293b' : '#ffffff';
        ctx.lineWidth = tool === 'pen' ? 3 : 40;
        ctx.lineTo(x, y); ctx.stroke();
    });
    window.addEventListener('mouseup', () => isDrawing = false);

    function setTool(t) {
        tool = t;
        document.getElementById('tool-pen').classList.toggle('tool-active', t === 'pen');
        document.getElementById('tool-eraser').classList.toggle('tool-active', t === 'eraser');
    }

    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

    function drawGeometry(type) {
        ctx.strokeStyle = '#6366f1';
        ctx.lineWidth = 4;
        const cx = canvas.width/2;
        const cy = canvas.height/2;
        ctx.beginPath();
        if(type === 'triangle') {
            ctx.moveTo(cx, cy-80); ctx.lineTo(cx-100, cy+80); ctx.lineTo(cx+100, cy+80); ctx.closePath();
        } else {
            ctx.arc(cx, cy, 80, 0, Math.PI*2);
        }
        ctx.stroke();
    }

    function finishLesson() {
        document.getElementById('result-modal').classList.remove('hidden');
        document.getElementById('res-score').innerText = `${score} / ${TOTAL}`;
        if(score < 15) document.getElementById('res-msg').innerText = "–ù–µ –∑–¥–∞–≤–∞–π—Å—è, —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä—ñ—è –ø–æ—Ç—Ä–µ–±—É—î –ø—Ä–∞–∫—Ç–∏–∫–∏!";
    }

    window.onload = () => {
        renderTasks();
        initCanvas();
    };
    window.onresize = initCanvas;
</script>
</body>
</html>